
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ChristopherMarais.github.io/ibbi/usage/">
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../api/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.17">
    
    
      
        <title>Usage Guide - IBBI Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#usage-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="IBBI Documentation" class="md-header__button md-logo" aria-label="IBBI Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IBBI Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Usage Guide
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/ChristopherMarais/ibbi" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    ChristopherMarais/ibbi
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  User Documentation

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../api/" class="md-tabs__link">
          
  
  
  API

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../CONTRIBUTING/" class="md-tabs__link">
          
  
  
  Development

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="IBBI Documentation" class="md-nav__button md-logo" aria-label="IBBI Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    IBBI Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ChristopherMarais/ibbi" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    ChristopherMarais/ibbi
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    User Documentation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Usage Guide
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Usage Guide
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-functions" class="md-nav__link">
    <span class="md-ellipsis">
      Core Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#listing-available-models" class="md-nav__link">
    <span class="md-ellipsis">
      Listing Available Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-model" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a Model
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prediction-and-feature-extraction-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Prediction and Feature Extraction Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prediction and Feature Extraction Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-1-bark-beetle-detection-single-class" class="md-nav__link">
    <span class="md-ellipsis">
      Example 1: Bark Beetle Detection (Single Class)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-2-species-detection-multi-class" class="md-nav__link">
    <span class="md-ellipsis">
      Example 2: Species Detection (Multi-Class)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-3-zero-shot-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Example 3: Zero-Shot Detection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-4-feature-extraction" class="md-nav__link">
    <span class="md-ellipsis">
      Example 4: Feature Extraction
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-usage" class="md-nav__link">
    <span class="md-ellipsis">
      Advanced Usage
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Advanced Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#model-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Model Evaluation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model-explainability-xai" class="md-nav__link">
    <span class="md-ellipsis">
      Model Explainability (XAI)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../CONTRIBUTING/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../LICENSE/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    License
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="usage-guide">Usage Guide</h1>
<p>This guide provides an in-depth walkthrough of the <code>ibbi</code> package's functionalities. We will cover everything from installation and basic setup to advanced applications like model evaluation and explainability, complete with detailed code examples and explanations to help you integrate <code>ibbi</code> into your research workflow.</p>
<h2 id="installation">Installation</h2>
<p>Getting <code>ibbi</code> set up on your system is a two-step process. Since <code>ibbi</code> relies on PyTorch for its deep learning capabilities, it's crucial to install it first to ensure compatibility with your hardware, especially if you have a GPU.</p>
<p><strong>1. Install PyTorch</strong></p>
<p>For optimal performance, particularly with GPU acceleration, it is essential to install the correct version of PyTorch for your system (Windows/Mac/Linux) and CUDA version.
Please follow the official, system-specific instructions at <a href="https://pytorch.org/get-started/locally/">pytorch.org</a>. This will ensure you leverage the full power of your hardware.</p>
<p><strong>2. Install IBBI</strong></p>
<p>Once PyTorch is installed, you can install <code>ibbi</code> from the Python Package Index (PyPI) using pip. It is highly recommended to do this within a virtual environment to avoid conflicts with other projects.</p>
<details>
<summary>üêç Conda Installation</summary>


<pre><code class="language-bash"># 1. Create and activate a new conda environment
conda create -n ibbi_env python=3.11 -y
conda activate ibbi_env

# 2. Install PyTorch first by following the official instructions
# for your specific system at https://pytorch.org/get-started/locally/

# 3. Install the ibbi package using pip
pip install ibbi
</code></pre>

</details>

<details>
<summary>üü® Pixi Installation</summary>


<pre><code class="language-bash"># 1. Initialize a pixi project in your directory (optional)
pixi init

# 2. Install PyTorch first by following the official instructions
# for your specific system at https://pytorch.org/get-started/locally/

# 3. Add ibbi to your project. Pixi will automatically handle the
# creation of the environment and resolve all dependencies, including PyTorch.
pixi add ibbi

# 4. Run commands or scripts within the managed environment
# For example, to start an interactive python session:
pixi run python
</code></pre>

</details>

<p><br>For developers who want to contribute or use the latest, unreleased features, you can install the package directly from the source on GitHub:</p>
<pre><code class="language-bash">pip install git+https://github.com/ChristopherMarais/IBBI.git
</code></pre>
<h2 id="core-functions">Core Functions</h2>
<p>The <code>ibbi</code> package is designed around a simple and intuitive API. The following core functions are your primary entry points for exploring, loading, and using the models.</p>
<h3 id="listing-available-models">Listing Available Models</h3>
<p>Before you can use a model, you need to know what's available. The <code>ibbi.list_models()</code> function provides a comprehensive overview of all registered models, their tasks, and key performance metrics. This is the best first step to help you select the most appropriate model for your specific needs.</p>
<pre><code class="language-python">import ibbi

# Get the model list as a pandas DataFrame for easy viewing and filtering
models_df = ibbi.list_models(as_df=True)

# Display the full table to see all available models and their metrics
print(&quot;--- Full Model Summary ---&quot;)
print(models_df.to_string())

# You can also filter the DataFrame to find models for a specific task
print(&quot;\n--- Multi-Class Object Detection Models ---&quot;)
multi_class_models = models_df[models_df['Tasks'].str.contains(&quot;Multi-class&quot;)]
print(multi_class_models[['Model Name', 'mAP@[.5:.95]', 'F1-score (Macro)']])
</code></pre>
<h3 id="creating-a-model">Creating a Model</h3>
<p>Once you've chosen a model, you can load it using <code>ibbi.create_model()</code>. The first time you load a model with <code>pretrained=True</code>, its weights will be downloaded from the Hugging Face Hub and stored in a local cache directory (<code>~/.cache/ibbi</code> by default). Subsequent calls will load the model instantly from your local machine.</p>
<p>For maximum convenience, <code>ibbi</code> provides simple aliases for the primary recommended model for each major task. This is the easiest way to get started without needing to remember specific model version names.</p>
<pre><code class="language-python"># Load a single-class object detection model using the &quot;beetle_detector&quot; alias
# This is ideal for quickly finding any beetle in an image.
detector = ibbi.create_model(&quot;beetle_detector&quot;, pretrained=True)

# Load a multi-class species detection model using its full, specific name
# This provides both location and species identification.
classifier = ibbi.create_model(&quot;yolov12x_bb_multi_class_detect_model&quot;, pretrained=True)

# Load a zero-shot detection model using the &quot;zero_shot_detector&quot; alias
# This model is great for general-purpose object detection using text prompts.
zs_detector = ibbi.create_model(&quot;zero_shot_detector&quot;, pretrained=True)

# Load a feature extraction model using the &quot;feature_extractor&quot; alias
# This is used to convert images into numerical vectors (embeddings).
feature_extractor = ibbi.create_model(&quot;feature_extractor&quot;, pretrained=True)
</code></pre>
<h2 id="prediction-and-feature-extraction-examples">Prediction and Feature Extraction Examples</h2>
<p>The models can perform inference on a variety of image sources, including a local file path, or a <code>PIL.Image</code> object that is already loaded in your Python script. This flexibility makes it easy to integrate <code>ibbi</code> into diverse data processing workflows.</p>
<p>NOTE: We recommend to create different instances of the model for inference and feature extraction to avoid any potential conflicts.</p>
<h3 id="example-1-bark-beetle-detection-single-class">Example 1: Bark Beetle Detection (Single Class)</h3>
<p><strong>Use Case:</strong> These models are optimized to answer a simple but crucial question: "Is there a beetle in this image, and where?" They identify the location (bounding boxes) of any beetle without identifying the species. This is highly effective for initial screening of field-trap images or other raw collection data to quickly quantify the number of specimens.</p>
<p><strong>Input Image:</strong></p>
<p align="center">
    <img src="assets/images/beetles.png" alt="Input image" width="33%">
</p>

<pre><code class="language-python">import ibbi

detector = ibbi.create_model(&quot;beetle_detector&quot;, pretrained=True)

# You can use a local file path
image_source = &quot;docs/assets/images/beetles.png&quot;

# Get bounding box predictions. The model returns a dictionary.
results = detector.predict(image_source)

# The result is a dictionary containing the detected boxes, confidence scores, and labels.
print(f&quot;Detected {len(results['boxes'])} beetles.&quot;)
# Example output for the first detected beetle:
if results['boxes']:
    print(f&quot;  - Box: {results['boxes'][0]}&quot;)
    print(f&quot;  - Label: {results['labels'][0]}&quot;)
    print(f&quot;  - Score: {results['scores'][0]:.2f}&quot;)
</code></pre>
<p><strong>Detection Output:</strong>
The output image shows the detected beetles, each enclosed in a red bounding box with its confidence score.</p>
<p align="center">
    <img src="assets/images/beetles_od.png" alt="Detection image" width="33%">
</p>

<h3 id="example-2-species-detection-multi-class">Example 2: Species Detection (Multi-Class)</h3>
<p><strong>Use Case:</strong> These models perform the core task of detailed biodiversity analysis by simultaneously finding the location of bark beetles and predicting their species. This is invaluable for species inventories, monitoring the spread of invasive species, and conducting ecological research where species-level data is paramount.</p>
<pre><code class="language-python">import ibbi

classifier = ibbi.create_model(&quot;species_classifier&quot;, pretrained=True)

# Use the same multi-beetle image to get species-level predictions
results = classifier.predict(image_source)

# The output is a dictionary with predicted species labels for each detected box.
print(f&quot;Detected and classified {len(results['boxes'])} beetles.&quot;)
if results['boxes']:
    print(f&quot;  - Top Prediction Box: {results['boxes'][0]}&quot;)
    print(f&quot;  - Predicted Species: {results['labels'][0]}&quot;)
    print(f&quot;  - Confidence Score: {results['scores'][0]:.2f}&quot;)

</code></pre>
<p><strong>Classification Output:</strong>
The output image now includes species-level labels and confidence scores, allowing for precise identification of each specimen.</p>
<p align="center">
    <img src="assets/images/beetles_oc.png" alt="Detection image" width="33%">
</p>

<h3 id="example-3-zero-shot-detection">Example 3: Zero-Shot Detection</h3>
<p><strong>Use Case:</strong> Zero-shot models offer incredible flexibility by allowing you to detect objects based on a text description, even if the model was not explicitly trained on that class. This is powerful for exploratory analysis, detecting general objects in your samples, or identifying other items of interest like debris or sample labels.</p>
<pre><code class="language-python">import ibbi

# Load the zero-shot detection model
zs_detector = ibbi.create_model(&quot;zero_shot_detector&quot;, pretrained=True)

# Predict objects using a text prompt. You can try other prompts too!
# For example: text_prompt=&quot;a round object . an insect leg&quot;
# Separate different text prompts using a full stop &quot;.&quot;
results = zs_detector.predict(image_source, text_prompt=&quot;a beetle&quot;)

print(results)
</code></pre>
<p><strong>Zero-Shot Output:</strong>
The model successfully identifies objects matching the text prompt, demonstrating its ability to generalize beyond its core training data.</p>
<p align="center">
    <img src="assets/images/beetles_zsoc.png" alt="Detection image" width="33%">
</p>

<h3 id="example-4-feature-extraction">Example 4: Feature Extraction</h3>
<p><strong>Use Case:</strong> All models can extract feature embeddings for an image. These are dense numerical vectors that capture the complex visual information of an image in a compact form. They are highly useful for advanced downstream tasks where you need to numerically compare images, such as:</p>
<ul>
<li><strong>Clustering</strong>: Grouping visually similar specimens without needing prior labels.</li>
<li><strong>Similarity Search</strong>: Building a system to find all images in a large dataset that resemble a query image.</li>
<li><strong>Training Custom Classifiers</strong>: Using the embeddings as powerful input features for simpler machine learning models (like SVMs or Logistic Regression) for specialized tasks.</li>
</ul>
<p>NOTE: TO get embeddings of specific objects in an image we reccomend using the zero-shot detection or the bark beetle detection models to split the iamge up into sub-iamges first.</p>
<pre><code class="language-python">import ibbi

# Any model can be used, but the dedicated 'feature_extractor' is optimized for this.
feature_extractor = ibbi.create_model(&quot;feature_extractor&quot;, pretrained=True)

# Extract the feature vector from the image
features = feature_extractor.extract_features(image_source)

print(f&quot;Extracted feature vector of shape: {features.shape}&quot;)
</code></pre>
<h2 id="advanced-usage">Advanced Usage</h2>
<p>Beyond basic inference, <code>ibbi</code> provides powerful tools for rigorously evaluating model performance and understanding their internal decision-making processes. These features are crucial for conducting transparent and reproducible scientific research.</p>
<h3 id="model-evaluation">Model Evaluation</h3>
<p>The <code>ibbi.Evaluator</code> class provides a simple and standardized interface for assessing model performance across different tasks. This is essential for understanding a model's strengths and weaknesses, comparing different models objectively, and reporting robust, quantitative results in publications.</p>
<pre><code class="language-python">import ibbi

# --- 1. Import the test dataset included with the package ---
data = ibbi.get_dataset()

# --- 2. Create a model to evaluate ---
model = ibbi.create_model(model_name=&quot;species_classifier&quot;, pretrained=True)

# --- 3. Instantiate the Evaluator ---
evaluator = ibbi.Evaluator(model=model)

# --- 4. Run Specific Evaluations ---

# a) Classification Performance: Calculates metrics like accuracy, F1-score, and precision/recall.
# This tells you how well the model identifies the correct species.
print(&quot;\\n--- Classification Performance ---&quot;)
classification_results = evaluator.classification(data)
print(f&quot;  Accuracy: {classification_results['accuracy']:.4f}&quot;)
print(f&quot;  Macro F1-Score: {classification_results['macro_f1_score']:.4f}&quot;)

# b) Object Detection Performance: Calculates mean Average Precision (mAP) for bounding box accuracy.
# This measures how well the model localizes the beetles in the image.
print(&quot;\\n--- Object Detection Performance ---&quot;)
od_results = evaluator.object_detection(data)
print(f&quot;  Mean Average Precision (mAP): {od_results['mAP']:.4f}&quot;)

# c) Embedding Quality: Assesses how well the model's embeddings separate species.
# This uses clustering metrics and compares embedding distances to a phylogenetic distance matrix.
print(&quot;\\n--- Embedding Quality ---&quot;)
embedding_results = evaluator.embeddings(data)
print(f&quot;  Silhouette Score: {embedding_results['internal_cluster_validation']['Silhouette_Score'].values[0]:.4f}&quot;)
print(f&quot;  Adjusted Rand Index (ARI): {embedding_results['external_cluster_validation']['ARI'].values[0]:.4f}&quot;)
print(f&quot;  Mantel Correlation (r): {embedding_results['mantel_correlation']['r']:.4f}&quot;)
</code></pre>
<h3 id="model-explainability-xai">Model Explainability (XAI)</h3>
<p>The <code>ibbi.Explainer</code> class provides a simple interface for using popular explainable AI (XAI) techniques like LIME and SHAP. This allows you to look inside the "black box" of a deep learning model to understand which parts of an image were most influential in its predictions. This is vital for debugging unexpected predictions, and potentially discovering novel morphological characters that the model uses for identification.</p>
<pre><code class="language-python">import ibbi

# --- 1. Create a Model and Explainer ---
model = ibbi.create_model(model_name=&quot;species_classifier&quot;, pretrained=True)
explainer = ibbi.Explainer(model=model)
image_to_explain = &quot;docs/assets/images/beetles.png&quot;


# --- 2. Explain with LIME ---
# LIME is great for a quick, intuitive visualization on a single image.
print(&quot;\\n--- Generating LIME Explanation ---&quot;)
lime_explanation, original_image = explainer.with_lime(image=image_to_explain)
ibbi.plot_lime_explanation(lime_explanation, original_image, top_k=1)


# --- 3. Explain with SHAP ---
# SHAP is more computationally intensive but provides more robust, theoretically-grounded explanations.
# It requires a &quot;background&quot; dataset to simulate the &quot;absence&quot; of image features.
print(&quot;\\n--- Generating SHAP Explanation ---&quot;)
background_dataset = ibbi.get_shap_background_dataset()
explain_dataset = [{&quot;image&quot;: ibbi.Image.open(image_to_explain)}]

shap_values = explainer.with_shap(
    explain_dataset=explain_dataset,
    background_dataset=background_dataset,
    num_explain_samples=1
)

# Plot the explanation for the first image
ibbi.plot_shap_explanation(shap_values[0], model)
</code></pre>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "navigation.instant", "toc.integrate", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>